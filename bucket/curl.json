{
    "version": "8.2.0_1",
    "description": "Command line tool and library for transferring data with URLs",
    "homepage": "https://curl.se/",
    "license": "MIT",
    "architecture": {
        "64bit": {
            "url": "https://curl.se/windows/dl-8.2.0_1/curl-8.2.0_1-win64-mingw.tar.xz",
            "hash": "c4f461fa6a24f21d5f29f1a163d9e0c99623f4cab1c289dcc2e11b9544e825df",
            "extract_dir": "curl-8.2.0_1-win64-mingw"
        },
        "32bit": {
            "url": "https://curl.se/windows/dl-8.2.0_1/curl-8.2.0_1-win32-mingw.tar.xz",
            "hash": "d7df12bc39d5bf458f4f3c5968a6f02d4384b9eb6c0a0c9c19800890c63492e7",
            "extract_dir": "curl-8.2.0_1-win32-mingw"
        },
        "arm64": {
            "url": "https://curl.se/windows/dl-8.2.0_1/curl-8.2.0_1-win64a-mingw.tar.xz",
            "hash": "1379eac0f2dfdf1ae2c6e6d54e85a1248ce129adf354ad5563ffbfa5b9684525",
            "extract_dir": "curl-8.2.0_1-win64a-mingw"
        }
    },
    "bin": "bin\\curl.exe",
    "checkver": {
        "url": "https://curl.se/windows/",
        "regex": "Build<\\/b>:\\s+([\\d._]+)"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://curl.se/windows/dl-$version/curl-$version-win64-mingw.tar.xz",
                "extract_dir": "curl-$version-win64-mingw"
            },
            "32bit": {
                "url": "https://curl.se/windows/dl-$version/curl-$version-win32-mingw.tar.xz",
                "extract_dir": "curl-$version-win32-mingw"
            },
            "arm64": {
                "url": "https://curl.se/windows/dl-$version/curl-$version-win64a-mingw.tar.xz",
                "extract_dir": "curl-$version-win64a-mingw"
            }
        },
        "hash": {
            "url": "$baseurl/hashes.txt",
            "regex": "SHA2-256\\($basename\\)=\\s+$sha256"
        }
    },
    "post_install": [
        "if (Test-Path \"$persist_dir\\curl-ca-bundle.crt\") {",
        "   $diff = Compare-Object $(Get-Content \"$persist_dir\\curl-ca-bundle.crt\") $(Get-Content \"$dir\\bin\\curl-ca-bundle.crt\")",
        "   if (!($null -eq $diff)) {",
        "       $resolved = $false",
        "       $optKeep = New-Object System.Management.Automation.Host.ChoiceDescription \"&Keep persisted certificates\",\"This preserves all manually added CAs.\"",
        "       $optOverwrite = New-Object System.Management.Automation.Host.ChoiceDescription \"&Overwrite with new certificates\",\"Overwrite with the default CAs distributed with the new version of curl.\"",
        "       $optExam = New-Object System.Management.Automation.Host.ChoiceDescription \"&Examine difference\",\"Inspect the differences between the existing and new CAs.\"",
        "       $options = [System.Management.Automation.Host.ChoiceDescription[]]($optKeep, $optOverwrite, $optExam)",
        "       while (!$resolved) {",
        "           $choice = $Host.UI.PromptForChoice(\"Detected change in curl-ca-bundle.crt\", $null, $options, 0)",
        "           switch ($choice) {",
        "               0 { Copy-Item \"$persist_dir\\curl-ca-bundle.crt\" \"$dir\\bin\\curl-ca-bundle.crt\" ; $resolved = $true; break }",
        "               1 { $resolved = $true; break }",
        "               2 { Write-Output \"<=: persisted certificates`n=>: new certificates\"; $diff | Out-String | Write-Output ; break }",
        "           }",
        "       }",
        "   }",
        "}"
    ],
    "pre_uninstall": [
        "# Persist manually curl-ca-bundle.crt",
        "if (Test-Path \"$dir\\bin\\curl-ca-bundle.crt\") {",
        "    ensure \"$persist_dir\" | Out-Null",
        "    Copy-Item \"$dir\\bin\\curl-ca-bundle.crt\" \"$persist_dir\\curl-ca-bundle.crt\" -Force -Recurse",
        "}"
    ]
}
