{
    "description": "ReNamer Pro cracked version by Dayanzai.me",
    "homepage": "https://github.com/jiangtian616/JHenTai",
    "license": "Unknown",
    "version": "7.5",
    "depends": "baidupcs-go",
    "url": "http://www.dayanzai.me/renamer-pro.html#/installer_placeholder",
    "hash": "7700f02435f7b01d7aa8ca019ed8663adb797631b833378b8c100bfb6740cb8a",
    "installer": {
        "script": [
            "$webResponse = Invoke-WebRequest \"http://www.dayanzai.me/renamer-pro.html\"",
            "$downloadURL = ($webResponse.Links | Where-Object {($_.outerHTML -like \"*>点击下载<*\") -and ($_.href -like \"*pan.baidu.com*\")} | Select-Object -first 1).href",
            "$passcode = $downloadURL.Split(\"?pwd=\")[-1]",
            "$downloadURL = $downloadURL.Split(\"?pwd=\")[0]",
            "$webResponse.Content -match \"资源：\\s*(?<filename>\\d+\\.rar)\"",
            "$filename = $matches[\"filename\"]",
            "$baiduLogedin = (BaiduPCS-Go loglist | Measure-Object -l).Lines -gt 1",
            "while (!$baiduLogedin) {",
            "    Write-Host \"Please login to Baidu to download the software.\"",
            "    BaiduPCS-Go login",
            "    $baiduLogedin = (BaiduPCS-Go loglist | Measure-Object -l).Lines -gt 1",
            "}",
            "BaiduPCS-Go cd /",
            "BaiduPCS-Go rm $filename | Out-Null",
            "BaiduPCS-Go transfer $downloadURL $passcode",
            "BaiduPCS-Go download $filename --saveto $dir",
            "Push-Location $dir && (7z e $filename renamer-$version.zip | Out-Null) && Remove-Item $filename && Expand-Archive renamer-$version.zip -DestinationPath . && Remove-Item renamer-$version.zip &&  Pop-Location"
        ]
    },
    "checkver": {
        "url": "http://www.dayanzai.me/renamer-pro.html",
        "regex": "<title>.* ([\\d\\.]+) .*</title>"
    },
    "autoupdate": {
        "hash": {
            "mode": "download"
        }
    },
    "shortcuts": [
        [
            "ReNamer.exe",
            "ReNamer"
        ]
    ]
}
